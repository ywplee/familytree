"use strict";var TreeNode=function(a){this.name=a,this.children=[],this.parent=null};TreeNode.prototype.addChild=function(a){a.parent=this,this.children.push(a)},TreeNode.prototype.getParent=function(){return this.parent},TreeNode.prototype.getGrandparent=function(){var a=null;return this.parent&&this.parent.parent&&(a=this.parent.parent),a},TreeNode.prototype.getChildren=function(){return this.children},function(){angular.module("familyTreeApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"scripts/components/tree/templates/tree.html",controller:"TreeCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"})}])}(),function(){function a(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}angular.module("familyTreeApp").directive("ngEnter",a)}(),function(){function a(a,b,c){function d(){p.tree=c.getTree(),a.$watch("vm.searchTerm",function(){if(p.searchTerm.length&&p.tree){var a=c.getGrandParent(p.searchTerm);p.grandSearchResult=a,a&&a.length>0?p.grandView=!0:p.grandView=!1}else p.grandView=!1}),a.$watch("vm.tree",function(){p.tree&&(p.tree.noSibling=!0,l(),n())})}function e(){p.tree=c.demo()}function f(a,b){a&&27===a.keyCode&&(b.edit=!1)}function g(a){var b=!1;return _.each(p.grandSearchResult,function(c){return c===a?void(b=!0):void 0}),b}function h(a){c.addChild(a),p.tree=c.getTree()}function i(){c.removeFamily(),p.tree=c.getTree()}function j(a,d){d.newChildName="",c.addChild(a,d),b(function(){l(),n()})}function k(a){void 0===a.edit?a.edit=!0:a.edit=!a.edit}function l(){m(p.tree)}function m(a){1===a.children.length?a.children[0].noSibling=!0:a.children.length>1&&_.each(a.children,function(a){a.noSibling=!1}),a.children.length>0&&_.each(a.children,function(a){m(a)})}function n(){var a=0;o(p.tree,a)}function o(a,b){var c=0;a&&a.children&&(_.each(a.children,function(a){c+=a.children.length}),c>b&&(b=c,p.mostGrandChildren=a),_.each(a.children,function(a){o(a,b)}))}var p=this;p.tree=null,p.searchTerm="",p.addChild=j,p.addFamily=h,p.demo=e,p.handleKeyEvent=f,p.isSearchResult=g,p.removeFamily=i,p.toggleEdit=k,d()}angular.module("familyTreeApp").controller("TreeCtrl",a),a.$inject=["$scope","$timeout","Tree"]}(),function(){function a(){function a(){var a=new TreeNode("Nancy"),b=new TreeNode("Carl"),c=new TreeNode("Kevin"),d=new TreeNode("George"),e=new TreeNode("James"),f=new TreeNode("Jill");return b.addChild(new TreeNode("Catherine")),b.addChild(new TreeNode("Joseph")),d.addChild(new TreeNode("Patrick")),d.addChild(new TreeNode("Robert")),e.addChild(new TreeNode("Mary")),c.addChild(new TreeNode("Samuel")),c.addChild(d),c.addChild(e),c.addChild(new TreeNode("Aaron")),f.addChild(c),a.addChild(new TreeNode("Adam")),a.addChild(f),a.addChild(b),g=a,a}function b(a,b){g?b.addChild(new TreeNode(a)):g=new TreeNode(a)}function c(){g=null}function d(){return g}function e(a){var b=f(a,g,[]);if(b&&b.length>0){var c=[];return _.each(b,function(a){c.push(a.getGrandparent())}),c}return[]}function f(a,b,c){var d=[];if(b&&b.children&&_.each(b.children,function(b,c){b.name.toLowerCase()===a.toLowerCase()&&d.push(c)}),d.length>0&&_.each(d,function(a){c.push(b.children[a])}),b&&b.children.length>0){for(var e=[],g=0;g<b.children.length;g++)e=f(a,b.children[g],c);return e}return c}var g=null,h={rootModel:g,demo:a,addChild:b,removeFamily:c,getGrandParent:e,getTree:d};return h}angular.module("familyTreeApp").factory("Tree",a)}();